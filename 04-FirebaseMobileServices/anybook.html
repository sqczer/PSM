<!DOCTYPE html>
<html lang="pl">
  <head>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dodaj książkę</title>
  </head>

  <body>
    <div id="books"></div>
      <input type="text" id="Autor" value="" placeholder="Author" /><br /><br />
      <input type="text" id="Tytul" value="" placeholder="Title" /><br /><br />
      <input type="text" id="Gatunek" value="" placeholder="Genre" /><br /><br />
      <input type="text" id="Rok" value="" placeholder="Year" /><br /><br />
      <input type="text" id="ISBN" value="" placeholder="ISBN" /><br /><br />
      <button onclick="submit()">Add new book</button>
    </div>

    <script>

    </script>

    <script>
      // Your web app's Firebase configuration
		var firebaseConfig = {
			apiKey: "AIzaSyDVP-UIkAqI5QkP3g2-WZfEtNVUJEESnQQ",
			authDomain: "anybook-1f407.firebaseapp.com",
			databaseURL: "https://anybook-1f407.firebaseio.com",
			projectId: "anybook-1f407",
			storageBucket: "anybook-1f407.appspot.com",
			messagingSenderId: "733964564157",
			appId: "1:733964564157:web:d11f28c9f38920515729d4",
			measurementId: "G-0LKXDEKER7"
		  };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      var db = firebase.firestore();

      var books = document.querySelector("#books");

      const ids = ["Autor", "Tytul", "Gatunek", "Rok", "ISBN"];
      let values = new Array(5).fill("");

      for (let id in ids) {
        let el = document.getElementById(ids[id]);
        el.addEventListener("change", (e) => {
          values[id] = e.target.value;
        });
      }

      function submit() {
			
        db.collection("books").add({
            Autor: values[0],
            Tytul: values[1],
            Gatunek: values[2],
            Rok: values[3].toString(),
            ISBN: values[4]
        }).then(cb => console.log("added book")).catch(er => console.log(`Exception caught: ${e.message}`))

      }
    </script>
  </body>
</html>
